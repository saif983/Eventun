<!-- Standalone Ticket Store Page -->
<div class="standalone-store-page">
  <!-- Navigation -->
  <app-navbar></app-navbar>

  <!-- Main Content Container -->
  <main class="standalone-main-content">
    <!-- Browse Tickets View -->
    <app-ticket-browse 
      *ngIf="currentView === 'browse'"
      (ticketClick)="onTicketClick($event)">
    </app-ticket-browse>

    <!-- Shopping Cart View -->
    <app-shopping-cart 
      *ngIf="currentView === 'cart'"
      (proceedToCheckout)="onProceedToCheckout()"
      (continueShopping)="onContinueShopping()">
    </app-shopping-cart>

    <!-- Checkout View -->
    <app-checkout 
      *ngIf="currentView === 'checkout'"
      (cancel)="onCheckoutCancel()">
    </app-checkout>
  </main>

  <!-- Ticket Details Modal -->
  <div *ngIf="showTicketModal && selectedTicket" class="modal-overlay" (click)="closeTicketModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3 class="modal-title">{{ selectedTicket.eventName }}</h3>
        <button (click)="closeTicketModal()" class="modal-close">
          <i class="fas fa-times"></i>
        </button>
      </div>
      
      <div class="modal-body">
        <div class="ticket-modal-image">
          <img [src]="selectedTicket.imageUrl" [alt]="selectedTicket.eventName" class="w-full h-64 object-cover rounded">
        </div>
        
        <div class="ticket-modal-details">
          <div class="detail-row">
            <span class="detail-label">Event:</span>
            <span class="detail-value">{{ selectedTicket.eventName }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Location:</span>
            <span class="detail-value">{{ selectedTicket.eventLocation }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Date:</span>
            <span class="detail-value">{{ selectedTicket.eventDate | date:'short' }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Type:</span>
            <span class="ticket-type-badge">{{ selectedTicket.ticketType }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Seller:</span>
            <span class="detail-value">{{ selectedTicket.sellerName }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Available:</span>
            <span class="detail-value">{{ selectedTicket.availableQuantity }} of {{ selectedTicket.totalQuantity }}</span>
          </div>
          
          <div class="pricing-details">
            <div class="price-row">
              <span>Original Price:</span>
              <span class="original-price">${{ selectedTicket.originalPrice }}</span>
            </div>
            <div class="price-row">
              <span>Selling Price:</span>
              <span class="selling-price">${{ selectedTicket.sellingPrice }}</span>
            </div>
            <div *ngIf="(selectedTicket.originalPrice || 0) > (selectedTicket.sellingPrice || 0)" class="price-row">
              <span>Discount:</span>
              <span class="discount">{{ (((selectedTicket.originalPrice || 0) - (selectedTicket.sellingPrice || 0)) / (selectedTicket.originalPrice || 1) * 100).toFixed(0) }}%</span>
            </div>
          </div>
          
          <div class="description">
            <h4>Description:</h4>
            <p>{{ selectedTicket.description }}</p>
          </div>

          <!-- Quantity Selection -->
          <div class="quantity-section">
            <h4>Quantity:</h4>
            <div class="quantity-controls">
              <button 
                (click)="updateQuantity(-1)"
                [disabled]="selectedQuantity <= 1"
                class="quantity-btn">
                <i class="fas fa-minus"></i>
              </button>
              <span class="quantity-display">{{ selectedQuantity }}</span>
              <button 
                (click)="updateQuantity(1)"
                [disabled]="selectedQuantity >= (selectedTicket.quantity || selectedTicket.availableQuantity || 0)"
                class="quantity-btn">
                <i class="fas fa-plus"></i>
              </button>
            </div>
            <p class="quantity-info">Total: ${{ ((selectedTicket.price || selectedTicket.sellingPrice || 0) * selectedQuantity).toFixed(2) }}</p>
          </div>
          
          <div class="modal-actions">
            <button 
              (click)="addToCart()"
              [disabled]="selectedTicket.availableQuantity === 0"
              class="btn-primary">
              <i class="fas fa-shopping-cart mr-2"></i>
              Add to Cart
            </button>
            <button (click)="closeTicketModal()" class="btn-secondary">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer -->
<app-footer></app-footer>
