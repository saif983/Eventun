<div class="browse-view">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Hero Section -->
    <div class="hero-section">
      <h1 class="text-3xl font-bold mb-4">Find Your Perfect Event Experience</h1>
      <p class="text-lg mb-6">Discover thousands of events from concerts to sports and theater. Buy or sell tickets with confidence.</p>
      <div class="flex flex-col md:flex-row gap-4">
        <div class="relative flex-1">
          <input 
            type="text" 
            [(ngModel)]="searchQuery"
            (input)="onSearch()"
            placeholder="Search events, locations, or sellers..." 
            class="w-full pl-10 pr-4 py-3 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-purple-500">
          <i class="fas fa-search absolute left-3 top-3.5 text-gray-400"></i>
        </div>
        <button class="bg-yellow-500 hover:bg-yellow-600 text-white font-medium px-6 py-3 rounded-lg transition duration-200">
          Search Events
        </button>
      </div>
    </div>

    <!-- Category Filters -->
    <div class="mb-8">
      <h2 class="text-xl font-semibold text-gray-900 mb-4">Popular Categories</h2>
      <div class="flex flex-wrap gap-3">
        <button 
          *ngFor="let category of categories"
          (click)="onCategoryChange(category.id)"
          [class.active]="selectedCategory === category.id"
          class="category-filter-btn">
          {{ category.name }}
        </button>
      </div>
    </div>

    <!-- Events Grid -->
    <div class="flex items-center justify-between mb-6">
      <div>
        <h2 class="text-xl font-semibold text-gray-900">Upcoming Events</h2>
        <p class="text-sm text-gray-500">{{ filteredEvents.length }} event(s) found</p>
      </div>
      <button 
        type="button"
        class="inline-flex items-center text-sm font-medium text-purple-600 hover:text-purple-700"
        (click)="loadEvents()">
        <i class="fas fa-sync-alt mr-2"></i>Refresh
      </button>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="flex justify-center items-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"></div>
      <span class="ml-3 text-gray-600">Loading events...</span>
    </div>
    
    <!-- Events Grid -->
    <div *ngIf="!isLoading" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
      <div 
        *ngFor="let event of paginatedEvents; trackBy: trackByEvent"
        class="event-card">
        <div class="relative">
          <img 
            *ngIf="event.picture"
            [src]="event.picture"
            [alt]="event.titre"
            class="w-full h-48 object-cover rounded-t-xl">
          <div *ngIf="!event.picture" class="w-full h-48 bg-gray-200 rounded-t-xl flex items-center justify-center">
            <i class="fas fa-image text-gray-400 text-4xl"></i>
          </div>
          <div class="absolute top-4 left-4">
            <span class="event-category">{{ event.category || 'Other' }}</span>
          </div>
        </div>

        <div class="p-5 space-y-4">
          <div class="flex items-start justify-between">
            <div>
              <h3 class="text-lg font-semibold text-gray-900">{{ event.titre }}</h3>
              <p class="text-sm text-gray-500">by {{ event.eventOwner }}</p>
            </div>
            <div class="text-right">
              <p class="text-sm font-medium text-purple-600">From {{ event.ticketPrice || 'N/A' }} DH</p>
              <p class="text-xs text-gray-400">
                {{ eventAvailableQuantities[event.tenantId] ?? event.ticketQte || 0 }} ticket(s)
              </p>
            </div>
          </div>

          <div class="flex items-center text-gray-500 text-sm">
            <i class="far fa-calendar-alt mr-2"></i>
            <span>{{ event.startDate | date:'EEE, MMM d Â· h:mm a' }}</span>
          </div>

          <div class="flex items-center text-gray-500 text-sm">
            <i class="fas fa-map-marker-alt mr-2"></i>
            <span>{{ event.location || 'TBD' }}</span>
          </div>

          <p class="text-sm text-gray-600 line-clamp-2" *ngIf="event.description">
            {{ event.description }}
          </p>

          <button
            type="button"
            class="btn-view-event"
            [disabled]="eventTicketLoading[event.tenantId]"
            (click)="onEventSelect(event)">
            <span *ngIf="!eventTicketLoading[event.tenantId]">
              <i class="fas fa-ticket-alt mr-2"></i>
              View Tickets
            </span>
            <span *ngIf="eventTicketLoading[event.tenantId]" class="flex items-center">
              <span class="loading-spinner-small mr-2"></span>
              Loading...
            </span>
          </button>
        </div>
      </div>
    </div>
    
    <!-- No Results -->
    <div *ngIf="!isLoading && filteredEvents.length === 0" class="text-center py-12">
      <p class="text-gray-500 text-lg">No events found matching your criteria.</p>
      <p class="text-gray-400 mt-2">Try adjusting your search or category filters.</p>
    </div>

    <!-- Pagination -->
    <div *ngIf="totalPages > 1" class="flex justify-center mt-8">
      <nav class="inline-flex rounded-md shadow-sm">
        <button 
          type="button"
          (click)="goToPage(currentPage - 1)"
          [disabled]="currentPage === 1"
          class="pagination-btn px-3 py-1 rounded-l-md border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
          <i class="fas fa-chevron-left"></i>
        </button>
        
        <button 
          *ngIf="pages.length > 0 && pages[0] > 1"
          type="button"
          (click)="goToPage(1)"
          [class.active]="1 === currentPage"
          class="pagination-btn px-4 py-1 border-t border-b border-gray-300 bg-white text-gray-900 font-medium hover:bg-gray-50">
          1
        </button>
        
        <span 
          *ngIf="pages.length > 0 && pages[0] > 2"
          class="px-2 py-1 border-t border-b border-gray-300 bg-white text-gray-500">
          ...
        </span>
        
        <button 
          *ngFor="let page of pages; trackBy: trackByPage"
          type="button"
          (click)="goToPage(page)"
          [class.active]="page === currentPage"
          class="pagination-btn px-4 py-1 border-t border-b border-gray-300 bg-white text-gray-900 font-medium hover:bg-gray-50">
          {{ page }}
        </button>
        
        <span 
          *ngIf="pages.length > 0 && pages[pages.length - 1] < totalPages - 1"
          class="px-2 py-1 border-t border-b border-gray-300 bg-white text-gray-500">
          ...
        </span>
        
        <button 
          *ngIf="pages.length > 0 && pages[pages.length - 1] < totalPages"
          type="button"
          (click)="goToPage(totalPages)"
          [class.active]="totalPages === currentPage"
          class="pagination-btn px-4 py-1 border-t border-b border-gray-300 bg-white text-gray-900 font-medium hover:bg-gray-50">
          {{ totalPages }}
        </button>
        
        <button 
          type="button"
          (click)="goToPage(currentPage + 1)"
          [disabled]="currentPage === totalPages"
          class="pagination-btn px-3 py-1 rounded-r-md border border-gray-300 bg-white text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
          <i class="fas fa-chevron-right"></i>
        </button>
      </nav>
    </div>
  </div>
</div>
