<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8">
  <div class="bg-white rounded-xl shadow-md overflow-hidden">
    <div class="p-6 border-b border-gray-200">
      <h2 class="text-2xl font-bold text-gray-900 flex items-center">
        <i class="fas fa-credit-card text-purple-600 mr-3"></i>
        Checkout
      </h2>
    </div>

    <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="p-6">
      <!-- Contact Information -->
      <div class="form-section mb-8">
        <h4 class="text-lg font-medium text-gray-900 mb-4">Contact Information</h4>
        <div class="form-group mb-4">
          <label for="customerName" class="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
          <input 
            type="text" 
            id="customerName" 
            formControlName="customerName"
            class="form-input"
            [class.error]="checkoutForm.get('customerName')?.invalid && checkoutForm.get('customerName')?.touched">
          <div *ngIf="checkoutForm.get('customerName')?.invalid && checkoutForm.get('customerName')?.touched" class="error-message">
            Name is required
          </div>
        </div>
        <div class="form-group mb-4">
          <label for="customerEmail" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
          <input 
            type="email" 
            id="customerEmail" 
            formControlName="customerEmail"
            class="form-input"
            [class.error]="checkoutForm.get('customerEmail')?.invalid && checkoutForm.get('customerEmail')?.touched">
          <div *ngIf="checkoutForm.get('customerEmail')?.invalid && checkoutForm.get('customerEmail')?.touched" class="error-message">
            Valid email is required
          </div>
        </div>
        <div class="form-group">
          <label for="customerPhone" class="block text-sm font-medium text-gray-700 mb-1">Phone *</label>
          <input 
            type="tel" 
            id="customerPhone" 
            formControlName="customerPhone"
            class="form-input"
            [class.error]="checkoutForm.get('customerPhone')?.invalid && checkoutForm.get('customerPhone')?.touched">
          <div *ngIf="checkoutForm.get('customerPhone')?.invalid && checkoutForm.get('customerPhone')?.touched" class="error-message">
            Phone number is required
          </div>
        </div>
      </div>

      <!-- Payment & Delivery -->
      <div class="form-section mb-8">
        <h4 class="text-lg font-medium text-gray-900 mb-4">Payment & Delivery</h4>
        <div class="form-group mb-4">
          <label for="paymentMethod" class="block text-sm font-medium text-gray-700 mb-1">Payment Method *</label>
          <select 
            id="paymentMethod" 
            formControlName="paymentMethod" 
            class="form-input">
            <option *ngFor="let method of paymentMethods" [value]="method.value">
              {{ method.label }}
            </option>
          </select>
        </div>
        <div class="form-group">
          <label for="deliveryMethod" class="block text-sm font-medium text-gray-700 mb-1">Delivery Method *</label>
          <select 
            id="deliveryMethod" 
            formControlName="deliveryMethod" 
            class="form-input">
            <option *ngFor="let method of deliveryMethods" [value]="method.value">
              {{ method.label }}
            </option>
          </select>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="order-summary mb-8 bg-gray-50 rounded-lg p-4">
        <h4 class="text-lg font-medium text-gray-900 mb-4">Order Summary</h4>
        <div *ngFor="let item of cartItems" class="summary-item flex justify-between py-2 border-b border-gray-200">
          <span class="text-gray-600">{{ item.ticket.eventName }} ({{ item.quantity }}x)</span>
          <span class="font-medium">{{ formatPrice((item.ticket.price || item.ticket.sellingPrice || 0) * item.quantity) }}</span>
        </div>
        <div class="summary-item flex justify-between py-2">
          <span class="text-gray-600">Service Fee</span>
          <span class="font-medium">{{ formatPrice(serviceFee) }}</span>
        </div>
        <div class="summary-total flex justify-between py-3 border-t border-gray-200 mt-2">
          <span class="text-lg font-semibold">Total:</span>
          <span class="text-lg font-semibold text-purple-600">{{ formatPrice(totalWithFee) }}</span>
        </div>
      </div>

      <!-- Checkout Actions -->
      <div class="checkout-actions">
        <button 
          type="submit" 
          [disabled]="checkoutForm.invalid || isSubmitting"
          class="complete-order-btn w-full bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-4 rounded-lg transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
          <span *ngIf="!isSubmitting">Proceed to Payment</span>
          <span *ngIf="isSubmitting" class="flex items-center justify-center">
            <i class="fas fa-spinner fa-spin mr-2"></i>
            Processing...
          </span>
        </button>
        <button 
          type="button" 
          (click)="onCancel()"
          class="cancel-order-btn w-full mt-4 bg-white hover:bg-gray-50 text-gray-800 font-medium py-3 px-4 border border-gray-300 rounded-lg transition duration-200">
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
